<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>L4 - Project Plan (Verbs for Stating Purpose)</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Plan - Verbs for Stating Purpose</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #f4f3ff, #e3f5ff, #ffe9f5, #e8f7ff);
            background-size: 400% 400%;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 400%; height: 400%;
            background: inherit;
            animation: gradientBG 18s ease infinite;
            z-index: -1;
        }

        @keyframes gradientBG {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }

        .container {
            width: 100%;
            max-width: 960px;
            background: #ffffff;
            border-radius: 26px;
            padding: 0 0 32px;
            box-shadow: 0 24px 70px rgba(15, 23, 42, 0.30);
            overflow: hidden;
        }

        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s ease-in; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* SHARED TOP HEADER (always visible) */
        .top-hero {
            position: relative;
            padding: 26px 32px 28px;
            background: linear-gradient(135deg, #ff5a3c 0%, #ffc247 50%, #ffeb3b 100%);
            color: #ffffff;
        }

        .hero-title {
            font-size: 1.9rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 6px;
        }

        .hero-subtitle {
            font-size: 0.98rem;
            text-align: center;
            opacity: 0.96;
        }

        .lang-toggle {
            position: absolute;
            top: 16px;
            right: 24px;
            padding: 6px 16px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.85);
            font-size: 0.8rem;
            background: rgba(255,255,255,0.16);
            backdrop-filter: blur(10px);
            color: #ffffff;
            cursor: pointer;
            font-weight: 600;
        }
        .lang-toggle:hover {
            background: rgba(255,255,255,0.24);
        }

        .top-progress-wrap {
            padding: 10px 26px 18px;
            background: #ffffff;
        }

        .course-progress-bar {
            width: 100%;
            height: 10px;
            border-radius: 999px;
            background: #edf2f7;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .course-progress-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg,#ffd27f,#ff7eb3);
            transition: width 0.5s ease;
        }

        .course-score-row {
            font-size: 0.9rem;
            color: #4a5568;
            text-align: center;
        }

        .course-score-row span {
            color: #f6ad55;
            font-weight: 600;
        }

        /* COVER BODY */
        .cover-body {
            padding: 32px 26px 8px;
            text-align: center;
        }

        .traffic-dots {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .traffic-dots span {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            box-shadow: 0 6px 12px rgba(148, 163, 184, 0.45);
        }

        .dot-red { background: #ff6b6b; }
        .dot-orange { background: #ffb347; }
        .dot-green { background: #1dd1a1; }

        .cover-main-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #5a3fd8;
            margin-bottom: 10px;
        }

        .cover-main-sub {
            max-width: 640px;
            margin: 0 auto 32px;
            font-size: 0.9rem;
            color: #2d3748;
            line-height: 1.6;
        }

        .big-start-btn-wrap {
            padding: 0 26px;
            margin-top: 8px;
        }

        .big-start-btn {
            width: 100%;
            border: none;
            border-radius: 999px;
            padding: 16px 24px;
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            cursor: pointer;
            background: linear-gradient(90deg,#5a3fd8,#6a5cf6,#54cfff);
            box-shadow: 0 12px 28px rgba(90, 63, 216, 0.45);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: transform 0.18s ease, box-shadow 0.18s ease;
        }

        .big-start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 14px 34px rgba(90, 63, 216, 0.55);
        }

        /* TASK PAGES */
        .inner-page {
            padding: 26px 26px 0;
        }

        .task-header { text-align: center; margin-bottom: 18px; }

        .task-title {
            background: linear-gradient(120deg,#667eea,#764ba2);
            -webkit-background-clip: text;
            color: transparent;
            font-size: 1.6rem;
            margin-bottom: 10px;
        }

       .instructions {
    background: rgba(247,250,252,0.95);
    border-radius: 999px;
    padding: 8px 16px;
    margin: 6px 0 18px;          /* closer to title, not centered */
    color: #4a5568;
    font-size: 0.92rem;
    display: inline-flex;
    align-items: flex-start;      /* top align */
    gap: 8px;
}

        .instructions strong { color: #2d3748; }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd27f 0%, #ff7eb3 50%, #667eea 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        .score-display {
            text-align: center;
            font-size: 1.05rem;
            color: #4a5568;
            margin: 6px 0 14px;
            font-weight: 600;
        }

        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            background: #f7fafc;
            border-radius: 18px;
            padding: 18px 14px;
            box-shadow: 0 4px 18px rgba(0,0,0,0.06);
        }

        .word-column, .meaning-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .word-column::before,
        .meaning-column::before {
            content: attr(data-label);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: #a0aec0;
            margin-bottom: 2px;
        }

        .word-card, .meaning-card {
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            text-align: center;
            border: 2px solid transparent;
        }

        .word-card {
           background: linear-gradient(90deg, #7b1fa2 0%, #3949ab 50%, #00acc1 100%);
            color: white;
            font-weight: 600;
            font-size: 1.15rem;
        }

        .word-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .meaning-card {
            background: #f7fafc;
            color: #2d3748;
            border: 2px solid #e2e8f0;
            font-size: 1.05rem;
        }

        .meaning-card:hover {
            background: #edf2f7;
            border-color: #667eea;
        }

        .word-card.selected {
            box-shadow: 0 0 0 3px white, 0 0 0 5px #667eea;
        }

        .meaning-card.selected {
            background: #e6f2ff;
            border-color: #667eea;
        }

        .meaning-card.correct {
            background: #c6f6d5;
            border-color: #48bb78;
            animation: pulse 0.5s ease;
        }

        .meaning-card.incorrect {
            background: #fed7d7;
            border-color: #f56565;
            animation: shake 0.5s ease;
        }

        @keyframes pulse {
            0%,100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%,100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .feedback {
            text-align: center;
            padding: 18px;
            border-radius: 12px;
            margin: 16px 26px 6px;
            font-size: 1.02rem;
            font-weight: 600;
            display: none;
        }

        .feedback.correct {
            background: #c6f6d5;
            color: #22543d;
            display: block;
        }

        .feedback.incorrect {
            background: #fed7d7;
            color: #742a2a;
            display: block;
        }

        .btn-container {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 11px 26px;
            border: none;
            border-radius: 999px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .btn-primary{
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:#ffffff;
            box-shadow:0 5px 15px rgba(102,126,234,0.3);
        }
        .btn-primary:hover{
            transform:translateY(-1px);
            box-shadow:0 8px 20px rgba(102,126,234,0.4);
        }

        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover { background: #cbd5e0; }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #667eea;
            animation: confetti-fall 3s linear;
        }

        @keyframes confetti-fall {
            to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .overview-table {
            width: 100%;
            border-collapse: collapse;
            background: #f7fafc;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
            overflow: hidden;
            margin: 24px 26px 0;
        }

        .overview-table th, .overview-table td {
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            color: #2d3748;
            text-align: left;
        }

        .overview-table th {
            background: #e2e8f0;
            font-weight: bold;
        }

        .context-option {
            padding: 12px 28px;
            border-radius: 999px;
            border: 2px solid transparent;
            background: #f7fafc;
            cursor: pointer;
            font-size: 1.02rem;
            transition: all 0.25s;
            font-weight: 600;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }

        .context-option:hover {
            border-color: #667eea;
            background: #edf2ff;
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            body { padding: 10px; }
            .container { border-radius: 20px; }

            .top-hero { padding: 22px 18px 24px; }
            .hero-title { font-size: 1.4rem; }
            .hero-subtitle { font-size: 0.85rem; }

            .lang-toggle {
                top: 12px;
                right: 14px;
                padding: 4px 12px;
            }

            .top-progress-wrap { padding: 10px 18px 14px; }
            .cover-body { padding: 24px 18px 4px; }
            .cover-main-sub { font-size: 0.9rem; }

            .big-start-btn-wrap { padding: 0 18px; }
            .inner-page { padding: 24px 18px 0; }

            .matching-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 8px;
            }

            .word-column, .meaning-column { gap: 6px; }

            .word-card, .meaning-card {
                padding: 10px 6px;
                font-size: 0.85rem;
                min-height: 52px;
            }

            .feedback {
                margin: 14px 18px 4px;
                font-size: 0.95rem;
            }

            .overview-table {
                margin: 22px 18px 0;
                font-size: 0.8rem;
            }

            .overview-table th, .overview-table td {
                padding: 8px 6px;
            }
        }

        @media (max-width: 400px) {
            .hero-title { font-size: 1.25rem; }
            .cover-main-sub { font-size: 0.86rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SHARED TOP HERO (toggle always visible) -->
        <div class="top-hero">
            <button class="lang-toggle" id="langToggleBtn" onclick="toggleLanguage()">ä¸­æ–‡</button>
            <div class="hero-title" id="heroTitle">Verbs to State Purpose</div>
            <div class="hero-subtitle" id="heroSubtitle">Master verbs to explain clearly why your project tasks are important</div>
        </div>

        <div class="top-progress-wrap">
            <div class="course-progress-bar">
                <div class="course-progress-fill" id="courseProgressFill"></div>
            </div>
            <div class="course-score-row">
                â­ <span id="courseScoreLabel">Completion</span>: <span id="courseScoreText">0 / 2 sections</span>
            </div>
        </div>

        <!-- COVER PAGE -->
        <div id="coverPage" class="page active">
            <div class="cover-body">
               <div class="traffic-dots">
  <span style="font-size:1.8rem;">ğŸ”´</span>
  <span style="font-size:1.8rem;">ğŸŸ </span>
  <span style="font-size:1.8rem;">ğŸŸ¢</span>
</div>

                <div class="cover-main-title" id="coverMainTitle">Success Criteria Challenge!</div>
                <p class="cover-main-sub" id="coverMainSub">
                    Complete two interactive challenges to master useful verbs for stating the purpose of your project tasks.
                    Use what you learn to write clear and persuasive project proposals.
                </p>
            </div>

            <div class="big-start-btn-wrap">
                <button class="big-start-btn" onclick="startActivity()" id="startBtnText">
                    Start Challenge ğŸš€
                </button>
            </div>
        </div>

        <!-- TASK PAGE 1 -->
        <div id="taskPage1" class="page">
            <div class="inner-page">
                <div class="task-header">
                    <h2 class="task-title" id="task1Title">Task 1: Match Verbs and Meanings</h2>
                </div>
                <div class="instructions" id="task1Instruction">
                    ğŸ“Œ <strong>Instruction:</strong> Click a verb, then choose its correct meaning. Match all pairs to continue!
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="score-display" id="scoreDisplay">Score: 0 / 10</div>
                <div class="matching-container">
                    <div class="word-column" id="wordColumn" data-label="Verbs"></div>
                    <div class="meaning-column" id="meaningColumn" data-label="Meanings"></div>
                </div>
            </div>
            <div class="feedback" id="feedback"></div>
            <div id="matchingOverview"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" id="resetBtn" onclick="resetActivity()">Reset</button>
                <button class="btn btn-primary" onclick="nextPage()" id="nextBtn" style="display: none;">Next: Sentence Challenge â†’</button>
                <button class="btn btn-secondary" id="homeBtn1" onclick="goToPage('coverPage')">ğŸ  Return to Home</button>
            </div>
        </div>

        <!-- TASK PAGE 2 -->
        <div id="taskPage2" class="page">
            <div class="inner-page">
                <div class="task-header">
                    <h2 class="task-title" id="task2Title">Task 2: Use the Verbs in Context</h2>
                </div>
                <div id="challengeGame"></div>
                <div id="challengeResult"></div>
                <div class="btn-container">
                    <button class="btn btn-secondary" id="backBtn2" onclick="goToPage('taskPage1')">â† Back</button>
                    <button class="btn btn-secondary" id="homeBtn2" onclick="goToPage('coverPage')">ğŸ  Return to Home</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const uiText = {
            en: {
                heroTitle: "Verbs for Stating Purpose",
                heroSubtitle: "Master verbs to explain clearly why your project tasks are important",
                coverMainTitle: "Project Purpose Challenge!",
                coverMainSub: "Complete two interactive challenges to master useful verbs for stating the purpose of your project tasks. Use what you learn to write clear and persuasive project proposals.",
                startBtn: "Start Challenge ğŸš€",
                scoreLabel: "Completion",
                task1Title: "Task 1: Match Verbs and Meanings",
                task1Instruction: "ğŸ“Œ <strong>Instruction:</strong> Click a verb, then choose its correct meaning. Match all pairs to continue!",
                resetBtn: "Reset",
                nextBtn: "Next: Sentence Challenge â†’",
                homeBtn: "ğŸ  Return to Home",
                task2Title: "Task 2: Use the Verbs in Context",
                backBtn2: "â† Back",
                bestScoreLabel: "Best score this session",
                toggleLabel: "ä¸­æ–‡"
            },
            zh: {
                heroTitle: "èªªæ˜ç›®çš„çš„å‹•è©",
                heroSubtitle: "å­¸ç¿’å¸¸ç”¨å‹•è©ï¼Œæ¸…æ¥šè§£é‡‹æ¯å€‹å°ˆé¡Œå·¥ä½œçš„é‡è¦æ€§ã€‚",
                coverMainTitle: "æˆåŠŸæº–å‰‡å°æŒ‘æˆ°ï¼",
                coverMainSub: "å®Œæˆå…©å€‹äº’å‹•ä»»å‹™ï¼ŒæŒæ¡å¦‚ä½•é‹ç”¨å‹•è©ä¾†èªªæ˜å°ˆé¡Œå·¥ä½œç›®çš„ï¼Œå¯«å‡ºæ¸…æ™°ã€æœ‰èªªæœåŠ›çš„å°ˆé¡Œè¨ˆåŠƒæ›¸ã€‚",
                startBtn: "é–‹å§‹æŒ‘æˆ° ğŸš€",
                scoreLabel: "å®Œæˆ",
                task1Title: "ä»»å‹™ä¸€ï¼šé…å°å‹•è©å’Œæ„æ€",
                task1Instruction: "ğŸ“Œ <strong>æŒ‡ç¤ºï¼š</strong> å…ˆæŒ‰ä¸€å€‹å‹•è©ï¼Œå†é¸æ“‡æ­£ç¢ºæ„æ€ã€‚å®Œæˆæ‰€æœ‰é…å°å¾Œå³å¯é€²å…¥ä¸‹ä¸€éƒ¨åˆ†ï¼",
                resetBtn: "é‡è¨­",
                nextBtn: "ä¸‹ä¸€éƒ¨åˆ†ï¼šå¥å­æŒ‘æˆ° â†’",
                homeBtn: "ğŸ  è¿”å›ä¸»é ",
                task2Title: "ä»»å‹™äºŒï¼šåœ¨å¥å­ä¸­é‹ç”¨å‹•è©",
                backBtn2: "â† è¿”å›",
                bestScoreLabel: "æœ¬æ¬¡æœ€é«˜åˆ†",
                toggleLabel: "EN"
            }
        };

        const vocabulary = [
            { word: 'produce', meaning: 'è£½ä½œã€å‰µé€ ', example: 'We will produce a new design for the shopping mall.' },
            { word: 'set up', meaning: 'å»ºç«‹ã€è¨­ç«‹', example: 'We will set up a digital resource platform for language learning.' },
            { word: 'review', meaning: 'å¯©è¦–', example: 'We will review the VOT3002 module materials for relevance.' },
            { word: 'evaluate', meaning: 'è©•ä¼°ã€åˆ¤æ–·åƒ¹å€¼æˆ–å“è³ª', example: 'We will evaluate student performance using rubrics.' },
            { word: 'examine', meaning: 'ä»”ç´°ç ”ç©¶ã€æª¢æŸ¥', example: 'We will examine current assessment methods for improvement.' },
            { word: 'renovate', meaning: 'ç¿»æ–°ã€ä¿®ç¹•', example: 'We will renovate the nursing rooms.' },
            { word: 'attract', meaning: 'å¸å¼•ã€å¼•èµ·æ³¨æ„', example: 'We will attract industry experts as guest speakers.' },
            { word: 'improve', meaning: 'æ”¹å–„', example: 'We will improve cross-departmental collaboration.' },
            { word: 'propose', meaning: 'å»ºè­°ã€æå‡ºï¼ˆè¨ˆåŠƒæˆ–æ§‹æ€ï¼‰', example: 'We will propose a new lighting set up plan.' },
            { word: 'enhance', meaning: 'åŠ å¼·ã€æå‡ï¼ˆè³ªç´ ï¼‰', example: 'We will enhance student presentation skills through practice.' }
        ];

        const baseChallengeQuestions = [
  {
    sentence_en: 'In our project, the team will _____ a bilingual handbook for new staff.',
    sentence_zh: 'åœ¨æœ¬å°ˆé¡Œä¸­ï¼Œå°çµ„æœƒ _____ ä¸€æœ¬é›™èªå“¡å·¥æ‰‹å†Šã€‚',
    options_en: ['produce', 'attract', 'review'],
    options_zh: ['è£½ä½œ', 'å¸å¼•', 'å¯©è¦–'],
    correct: 'produce'
  },
  {
    sentence_en: 'The committee plans to _____ an online support system for users.',
    sentence_zh: 'å§”å“¡æœƒè¨ˆåŠƒ _____ ä¸€å€‹çµ¦ç”¨å®¶çš„ç¶²ä¸Šæ”¯æ´ç³»çµ±ã€‚',
    options_en: ['set up', 'design', 'evaluate'],
    options_zh: ['å»ºç«‹', 'è¨­è¨ˆ', 'è©•ä¼°'],
    correct: 'set up'
  },
  {
    sentence_en: 'Our aim is to _____ all entries before starting implementation.',
    sentence_zh: 'æˆ‘å€‘çš„ç›®æ¨™æ˜¯åœ¨é–‹å§‹å¯¦è¡Œå‰å…ˆ _____ æ‰€æœ‰é …ç›®ã€‚',
    options_en: ['review', 'propose', 'improve'],
    options_zh: ['å¯©è¦–', 'å»ºè­°', 'æ”¹å–„'],
    correct: 'review'
  },
  {
    sentence_en: 'Our proposal is to _____ the training modules after each term.',
    sentence_zh: 'æˆ‘å€‘å»ºè­°åœ¨æ¯å­¸æœŸå¾Œ _____ åŸ¹è¨“å–®å…ƒã€‚',
    options_en: ['evaluate', 'examine', 'attract'],
    options_zh: ['è©•ä¼°', 'æª¢è¦–', 'å¸å¼•'],
    correct: 'evaluate'
  },
  {
    sentence_en: 'The project team will _____ previous project outcomes to find best practices.',
    sentence_zh: 'å°ˆé¡Œå°çµ„æœƒ _____ éå¾€å°ˆé¡Œæˆæœï¼Œä»¥æ‰¾å‡ºæœ€ä½³åšæ³•ã€‚',
    options_en: ['examine', 'renovate', 'improve'],
    options_zh: ['æª¢è¦–', 'ç¿»æ–°', 'æ”¹å–„'],
    correct: 'examine'
  },
  {
    sentence_en: 'A key deliverable is to _____ outdated workspaces for staff and students.',
    sentence_zh: 'å…¶ä¸­ä¸€é …é‡è¦æˆæœæ˜¯ _____ éæ™‚çš„å·¥ä½œé–“ã€‚',
    options_en: ['renovate', 'produce', 'evaluate'],
    options_zh: ['ç¿»æ–°', 'è£½ä½œ', 'è©•ä¼°'],
    correct: 'renovate'
  },
  {
    sentence_en: 'We hope to _____ professionals to participate in our seminar.',
    sentence_zh: 'æˆ‘å€‘å¸Œæœ› _____ è¡Œå…§å°ˆå®¶åƒèˆ‡ç ”è¨æœƒã€‚',
    options_en: ['attract', 'set up', 'improve'],
    options_zh: ['å¸å¼•', 'å»ºç«‹', 'æ”¹å–„'],
    correct: 'attract'
  },
  {
    sentence_en: 'The goal is to _____ communication among all departments.',
    sentence_zh: 'ç›®æ¨™æ˜¯ _____ å„éƒ¨é–€ä¹‹é–“çš„æºé€šã€‚',
    options_en: ['improve', 'evaluate', 'propose'],
    options_zh: ['æ”¹å–„', 'è©•ä¼°', 'å»ºè­°'],
    correct: 'improve'
  },
  {
    sentence_en: 'Management will _____ new guidelines for project submissions.',
    sentence_zh: 'ç®¡ç†å±¤å°‡æœƒ _____ æ–°çš„å°ˆé¡Œæäº¤æŒ‡å¼•ã€‚',
    options_en: ['propose', 'renovate', 'review'],
    options_zh: ['å»ºè­°', 'ç¿»æ–°', 'å¯©è¦–'],
    correct: 'propose'
  },
  {
    sentence_en: 'To boost student engagement, we aim to _____ interactive learning features.',
    sentence_zh: 'ç‚ºäº†æå‡å­¸ç”Ÿåƒèˆ‡åº¦ï¼Œæˆ‘å€‘å¸Œæœ› _____ äº’å‹•å­¸ç¿’åŠŸèƒ½ã€‚',
    options_en: ['enhance', 'attract', 'examine'],
    options_zh: ['åŠ å¼·', 'å¸å¼•', 'æª¢è¦–'],
    correct: 'enhance'
  }
];

        let challengeQuestions = [];

        let selectedWord = null;
        let score = 0;
        let matchedPairs = 0;
        let currentPage = 'coverPage';
        let challengeIndex = 0;
        let challengeScore = 0;
        let challengeStreak = 0;
        let challengeOrder = [];
        let challengeTimer = null;
        let timeLeft = 10;
        let bestScore = 0;
        let completedSections = 0;
        let currentLang = 'en';

        function toggleLanguage() {
            const newLang = currentLang === 'en' ? 'zh' : 'en';
            switchLanguage(newLang);
        }

        function switchLanguage(lang) {
            currentLang = lang;
            const t = uiText[lang];

            document.getElementById('heroTitle').textContent = t.heroTitle;
            document.getElementById('heroSubtitle').textContent = t.heroSubtitle;
            document.getElementById('coverMainTitle').textContent = t.coverMainTitle;
            document.getElementById('coverMainSub').textContent = t.coverMainSub;
            document.getElementById('startBtnText').textContent = t.startBtn;
            document.getElementById('courseScoreLabel').textContent = t.scoreLabel;
            document.getElementById('task1Title').textContent = t.task1Title;
            document.getElementById('task1Instruction').innerHTML = t.task1Instruction;
            document.getElementById('resetBtn').textContent = t.resetBtn;
            document.getElementById('nextBtn').textContent = t.nextBtn;
            document.getElementById('homeBtn1').textContent = t.homeBtn;
            document.getElementById('task2Title').textContent = t.task2Title;
            document.getElementById('backBtn2').textContent = t.backBtn2;
            document.getElementById('homeBtn2').textContent = t.homeBtn;
            document.getElementById('langToggleBtn').textContent = t.toggleLabel;

            const bestLabels = document.querySelectorAll('.best-score-label');
            bestLabels.forEach(el => el.textContent = t.bestScoreLabel);

            if (currentPage === 'taskPage2' && challengeOrder.length > 0 && challengeIndex < challengeQuestions.length) {
                showChallengeQuestion();
            }
        }

        function updateCourseProgress() {
            const fill = document.getElementById('courseProgressFill');
            const text = document.getElementById('courseScoreText');
            const percent = (completedSections / 2) * 100;
            fill.style.width = percent + '%';
            text.textContent = `${completedSections} / 2 sections`;
        }

        function startActivity() {
            goToPage('taskPage1');
            setupMatchingExercise();
        }

        function goToPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
        }

        /* TASK 1 */
        function setupMatchingExercise() {
            const wordColumn = document.getElementById('wordColumn');
            const meaningColumn = document.getElementById('meaningColumn');
            wordColumn.innerHTML = '';
            meaningColumn.innerHTML = '';
            document.getElementById('matchingOverview').innerHTML = '';
            const shuffledMeanings = shuffleArray(vocabulary);
            vocabulary.forEach(item => {
                const wordCard = document.createElement('div');
                wordCard.className = 'word-card';
                wordCard.textContent = item.word;
                wordCard.dataset.word = item.word;
                wordCard.onclick = () => selectWord(wordCard);
                wordColumn.appendChild(wordCard);
            });
            shuffledMeanings.forEach(item => {
                const meaningCard = document.createElement('div');
                meaningCard.className = 'meaning-card';
                meaningCard.textContent = item.meaning;
                meaningCard.dataset.word = item.word;
                meaningCard.onclick = () => selectMeaning(meaningCard);
                meaningColumn.appendChild(meaningCard);
            });
        }

        function selectWord(card) {
            document.querySelectorAll('.word-card').forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            selectedWord = card.dataset.word;
            hideFeedback();
        }

        function selectMeaning(card) {
            if (!selectedWord) {
                showFeedback(currentLang === 'en' ? 'Please select a verb first!' : 'è«‹å…ˆé¸æ“‡ä¸€å€‹å‹•è©ï¼', false);
                return;
            }
            if (card.classList.contains('correct')) {
                showFeedback(currentLang === 'en' ? 'This pair is already matched!' : 'é€™ä¸€å°å·²ç¶“é…å°äº†ï¼', false);
                return;
            }
            const isCorrect = card.dataset.word === selectedWord;
            if (isCorrect) {
                card.classList.add('correct');
                document.querySelector(`.word-card[data-word="${selectedWord}"]`).classList.add('correct');
                score++;
                matchedPairs++;
                showFeedback(currentLang === 'en' ? 'âœ… Correct!  Well done!' : 'âœ… æ­£ç¢ºï¼åšå¾—å¥½ï¼', true);
                createConfetti();
                updateScore();
                updateProgress();
                selectedWord = null;
                if (matchedPairs === vocabulary.length) {
                    setTimeout(() => {
                        showFeedback(currentLang === 'en'
                            ? 'ğŸ‰ Excellent work!  You matched all the verbs!'
                            : 'ğŸ‰ å¾ˆæ£’ï¼ä½ å·²å®Œæˆæ‰€æœ‰å‹•è©é…å°ï¼', true);
                        document.getElementById('nextBtn').style.display = 'inline-block';
                        showMatchingOverview();
                        completedSections = Math.max(completedSections, 1);
                        updateCourseProgress();
                    }, 500);
                }
            } else {
                card.classList.add('incorrect');
                setTimeout(() => card.classList.remove('incorrect'), 1000);
                showFeedback(currentLang === 'en' ? 'âŒ Not quite.  Try again!' : 'âŒ ä»æœªæ­£ç¢ºï¼Œå†è©¦ä¸€æ¬¡ï¼', false);
            }
        }

        function updateScore() {
            document.getElementById('scoreDisplay').textContent = `Score: ${score} / ${vocabulary.length}`;
        }

        function updateProgress() {
            const percentage = (matchedPairs / vocabulary.length) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        function showFeedback(message, isCorrect) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
        }

        function hideFeedback() {
            const feedback = document.getElementById('feedback');
            feedback.style.display = 'none';
        }

        function resetActivity() {
            score = 0;
            matchedPairs = 0;
            selectedWord = null;
            updateScore();
            updateProgress();
            hideFeedback();
            setupMatchingExercise();
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('matchingOverview').innerHTML = '';
        }

        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#f6ad55', '#48bb78', '#ed64a6'];
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        function showMatchingOverview() {
            const overviewDiv = document.getElementById('matchingOverview');
            let title = currentLang === 'en' ? 'Verb-Meaning Overview' : 'å‹•è©èˆ‡æ„æ€ä¸€è¦½';
            let html = `<h3 style="color:#667eea;margin:20px 26px 10px;">${title}</h3>`;
            html += '<table class="overview-table">';
            html += '<thead><tr><th>Verb</th><th>Meaning</th></tr></thead><tbody>';
            vocabulary.forEach(item => {
                html += `<tr><td>${item.word}</td><td>${item.meaning}</td></tr>`;
            });
            html += '</tbody></table>';
            overviewDiv.innerHTML = html;
        }

        function nextPage() {
            goToPage('taskPage2');
            setupContextExercise();
        }

        /* TASK 2: CONTEXT QUIZ */
        function shuffleArray(array) {
            const arr = array.slice();
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }
function prepareChallengeQuestions() {
  // keep structure but do not flatten options yet
  challengeQuestions = baseChallengeQuestions.map(q => {
    // shuffle English options, keep same order for Chinese
    const indices = shuffleArray([0,1,2]);
    return {
      ...q,
      options_en: indices.map(i => q.options_en[i]),
      options_zh: indices.map(i => q.options_zh[i])
    };
  });
}


        function setupContextExercise() {
            document.getElementById('challengeGame').innerHTML = '';
            document.getElementById('challengeResult').innerHTML = '';
            challengeIndex = 0;
            challengeScore = 0;
            challengeStreak = 0;
            prepareChallengeQuestions();
            challengeOrder = shuffleArray(challengeQuestions.map((_, i) => i));
            showReadyScreen();
        }

        function showReadyScreen() {
            const t = uiText[currentLang];
            document.getElementById('challengeGame').innerHTML = `
                <div style="text-align:center; padding:34px 20px; background:linear-gradient(135deg, #f0f4ff 0%, #fff5f7 100%); border-radius:16px; margin:10px 0 18px; box-shadow:0 8px 24px rgba(118,75,162,0.25);">
                    <div style="font-size:3rem; margin-bottom:18px;">ğŸ®</div>
                    <h3 style="color:#667eea; font-size:1.35rem; margin-bottom:16px;">${currentLang === 'en' ? 'Get Ready for the Sentence Challenge!' : 'æº–å‚™å¥½é€²è¡Œå¥å­æŒ‘æˆ°ï¼'}</h3>
                    <div style="background:white; padding:18px; border-radius:12px; margin:18px 0; border-left:4px solid #667eea; text-align:left;">
                        <p style="color:#4a5568; line-height:1.7; margin-bottom:8px;">
                            ğŸ“Œ <strong>${currentLang === 'en' ? 'How to Play:' : 'ç©æ³•èªªæ˜ï¼š'}</strong>
                        </p>
                        <ul style="color:#4a5568; line-height:1.7; padding-left:20px; text-align:left;">
                            <li>${currentLang === 'en' ? 'Answer 10 questions, one by one.' : 'ä½ éœ€è¦é€é¡Œå›ç­” 10 æ¢å•é¡Œã€‚'}</li>
                            <li>${currentLang === 'en' ? 'You have 10 seconds for each question.' : 'æ¯é¡Œæœ‰ 10 ç§’ä½œç­”æ™‚é–“ã€‚'}</li>
                            <li>${currentLang === 'en' ? 'Choose the best verb to complete each sentence.' : 'å¾é¸é …ä¸­é¸å‡ºæœ€åˆé©çš„å‹•è©å®Œæˆå¥å­ã€‚'}</li>
                            <li>${currentLang === 'en' ? 'Build a streak to earn bonus points! ğŸ”¥' : 'ä¿æŒé€£çºŒç­”å°å¯ä»¥å–å¾—é¡å¤–åˆ†æ•¸ï¼ğŸ”¥'}</li>
                        </ul>
                    </div>
                    <p style="color:#667eea; font-size:1.05rem; font-weight:600; margin:20px 0 6px;">${currentLang === 'en' ? 'Are you ready?' : 'æº–å‚™å¥½äº†å—ï¼Ÿ'}</p>
                    <button class="btn btn-primary" onclick="startChallengeGame()" style="font-size:1rem; padding:12px 34px; margin-top:4px;">
                        ${currentLang === 'en' ? 'âœ… Start Sentence Challenge' : 'âœ… é–‹å§‹å¥å­æŒ‘æˆ°'}
                    </button>
                    <p style="margin-top:12px; font-size:0.9rem; color:#4a5568;">
                        ğŸ… <span class="best-score-label">${t.bestScoreLabel}</span>ï¼š<strong>${bestScore}</strong>
                    </p>
                </div>
            `;
        }

        function startChallengeGame() {
            showChallengeQuestion();
        }

        function showChallengeQuestion() {
            clearInterval(challengeTimer);
            if (challengeIndex >= challengeQuestions.length) {
                showChallengeEndScreen();
                return;
            }
            const idx = challengeOrder[challengeIndex];
            const q = challengeQuestions[idx];
            const sentence = currentLang === 'en' ? q.sentence_en : q.sentence_zh;
            const t = uiText[currentLang];

            timeLeft = 10;
            document.getElementById('challengeGame').innerHTML = `
                <div style="text-align:center;margin-bottom:10px; box-shadow:0 8px 24px rgba(118,75,162,0.25); border-radius:18px; padding:20px;">
                    <strong>${currentLang === 'en' ? 'Question' : 'ç¬¬'} ${challengeIndex + 1} ${currentLang === 'en' ? 'of' : '/'} ${challengeQuestions.length}</strong>
                    <div style="margin:10px 0;">
                        <span id="challengeTimer" style="color:#764ba2;font-weight:bold;font-size:1.2rem;">â° ${timeLeft}</span> ${currentLang === 'en' ? 'seconds left' : 'ç§’'}
                    </div>
                    <div style="color:#2d3748;font-size:1.05rem;margin:18px 0;line-height:1.6;font-weight:700;">${sentence}</div>
                    <div id="challengeOptions" style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;"></div>
                    <div style="margin:12px 0;font-size:1rem;">
                        ${currentLang === 'en' ? 'Score' : 'åˆ†æ•¸'}: <b style="color:#667eea;">${challengeScore}</b>
                        &nbsp;|&nbsp;
                        ${currentLang === 'en' ? 'Streak' : 'é€£çºŒç­”å°'}: <b style="color:#764ba2;">ğŸ”¥ ${challengeStreak}</b>
                    </div>
                    <p style="margin-top:2px; font-size:0.9rem; color:#4a5568;">
                        ğŸ… <span class="best-score-label">${t.bestScoreLabel}</span>ï¼š<strong>${bestScore}</strong>
                    </p>
                </div>
            `;
            const optionsContainer = document.getElementById('challengeOptions');
            // NEW: pick the correct options list for current language
  const opts = currentLang === 'en' ? q.options_en : q.options_zh;

  opts.forEach((label, i) => {
    const btn = document.createElement('button');
    btn.textContent = label;
    btn.className = 'context-option';

    // English correct key stays the same; index i matches both arrays
    const optionKey = q.options_en[i];

    btn.onclick = () => handleChallengeAnswer(optionKey);
    optionsContainer.appendChild(btn);
  });
            challengeTimer = setInterval(() => {
                timeLeft--;
                const timerSpan = document.getElementById('challengeTimer');
                if (timerSpan) timerSpan.textContent = `â° ${timeLeft}`;
                if (timeLeft === 0) {
                    clearInterval(challengeTimer);
                    handleChallengeAnswer(null);
                }
            }, 1000);
        }

        function handleChallengeAnswer(selected) {
            clearInterval(challengeTimer);
            const idx = challengeOrder[challengeIndex];
            const q = challengeQuestions[idx];
            const feedback = document.createElement('div');
            feedback.style.cssText = 'text-align:center; font-size:1rem; font-weight:600; margin: 12px 0; padding:14px; border-radius:12px;';

            if (selected === q.correct) {
                const bonus = challengeStreak * 5;
                challengeScore += 10 + bonus;
                challengeStreak++;
                feedback.textContent = currentLang === 'en'
                    ? `âœ… Correct! +${10 + bonus} points. Streak: ğŸ”¥${challengeStreak}`
                    : `âœ… æ­£ç¢ºï¼å¾—åˆ° ${10 + bonus} åˆ†ã€‚é€£çºŒç­”å°ï¼šğŸ”¥${challengeStreak}`;
                feedback.style.color = '#22543d';
                feedback.style.background = '#c6f6d5';
                createConfetti();
            } else if (selected == null) {
                feedback.textContent = currentLang === 'en'
                    ? `â° Time's up! The correct answer was "${q.correct}".`
                    : `â° æ™‚é–“åˆ°äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ "${q.correct}"ã€‚`;
                challengeStreak = 0;
                feedback.style.color = '#742a2a';
                feedback.style.background = '#fed7d7';
            } else {
                feedback.textContent = currentLang === 'en'
                    ? `âŒ Incorrect! The correct answer was "${q.correct}". Streak reset.`
                    : `âŒ ä¸æ­£ç¢ºï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ "${q.correct}"ã€‚é€£çºŒç­”å°å·²é‡ç½®ã€‚`;
                challengeStreak = 0;
                feedback.style.color = '#742a2a';
                feedback.style.background = '#fed7d7';
            }
            document.getElementById('challengeGame').appendChild(feedback);

            setTimeout(() => {
                challengeIndex++;
                showChallengeQuestion();
            }, 1500);
        }

        function showChallengeEndScreen() {
            if (challengeScore > bestScore) bestScore = challengeScore;
            completedSections = 2;
            updateCourseProgress();
            const t = uiText[currentLang];
            document.getElementById('challengeGame').innerHTML = '';
            document.getElementById('challengeResult').innerHTML =
                `<div style="text-align:center; padding:26px; border-radius:20px; font-size:1.1rem; font-weight:600; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:#fff; margin-top:14px; box-shadow: 0 12px 30px rgba(102, 126, 234, 0.5);">
                    ğŸ® ${currentLang === 'en' ? 'Challenge Complete!' : 'æŒ‘æˆ°å®Œæˆï¼'}<br><br>
                    ${currentLang === 'en' ? 'Your Final Score' : 'ä½ çš„æœ€å¾Œåˆ†æ•¸'}: <b style="font-size:1.8rem;">${challengeScore}</b><br><br>
                    ğŸ… <span class="best-score-label" style="font-weight:600;">${t.bestScoreLabel}</span>ï¼š<b>${bestScore}</b><br><br>
                    <button class="btn btn-primary" onclick="setupContextExercise()" style="margin-top:10px; background:white; color:#667eea;">
                        ${currentLang === 'en' ? 'ğŸ² Play Again' : 'ğŸ² å†ç©ä¸€æ¬¡'}
                    </button>
                </div>`;
            createConfetti();
        }

        updateCourseProgress();
        switchLanguage('en');
    </script>
</body>
</html>
    
  </body>
  
</html>
